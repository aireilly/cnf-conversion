[id="k8s-best-practices-openshift-operations"]
= Operations that shall be executed by OpenShift

The application should not require `NET_ADMIN` capability to perform the following administrative operations:

[id="k8s-best-practices-mtu-setting"]
== Setting the MTU

* Configure the MTU for the cluster network, also known as the OVN or Openshift-SDN network, by modifying the manifests generated by `openshift-installer` before deploying the cluster. See link:https://docs.openshift.com/container-platform/latest/networking/changing-cluster-network-mtu.html[Changing the MTU for the cluster network] for more information.

* Configure additional networks managed by the Cluster Network Operator by using `NetworkAttachmentDefinition` resources generated by the Cluster Network Operator. See link:https://docs.openshift.com/container-platform/latest/networking/hardware_networks/using-sriov-multicast.html[Using high performance multicast] for more information.

* Configure SR-IOV interfaces by using the SR-IOV Network Operator, see link:https://docs.openshift.com/container-platform/latest/networking/hardware_networks/configuring-sriov-device.html[Configuring an SR-IOV network device] for more information.

[id="k8s-best-practices-link-state-modification"]
== Modifying link state

* All the links should be set up before attaching it to a pod.

[id="k8s-best-practices-ip/mac-address-assignment"]
== Assigning IP/MAC addresses

* For all the networks, the IP/MAC address should be assigned to the interface during pod creation.

* MULTUS also allows users to override the IP/MAC address. Refer to link:https://docs.openshift.com/container-platform/latest/networking/multiple_networks/attaching-pod.html[Attaching a pod to an additional network] for more information.

[id="k8s-best-practices-manipulate-pod’s-route-table"]
== Manipulating pod route tables

* By default, the default route of the pod will point to the cluster network, with or without the additional networks. MULTUS also allows users to override the default route of the pod. Refer to link:https://docs.openshift.com/container-platform/latest/networking/multiple_networks/attaching-pod.html[Attaching a pod to an additional network] for more information.

* Non-default routes can be added to pod routing tables by various IPAM CNI plugins during pod creation.

[id="k8s-best-practices-sr/iov-vf-setting"]
== Setting SR/IOV VFs

The SR-IOV Network Operator also supports configuring the following parameters for SR-IOV VFs. Refer to link:https://docs.openshift.com/container-platform/latest/networking/hardware_networks/configuring-sriov-net-attach.html[Configuring an SR-IOV Ethernet network attachment] for more information.

* `vlan`
* `linkState`
* `maxTxRate`
* `minRxRate`
* `vlanQoS`
* `spoofChk`
* `trust`

[id="k8s-best-practices-multicast"]
== Configuring multicast

In OpenShift, multicast is supported for both the default interface (OVN or OpenShift-SDN) and the additional interfaces such as macvlan, SR-IOV, etc. Multicast is disabled by default. To enable it, refer to the following procedures:

* link:https://docs.openshift.com/container-platform/4.16/networking/openshift_sdn/enabling-multicast.html[Enabling multicast for a project]
* link:https://docs.openshift.com/container-platform/latest/networking/hardware_networks/using-sriov-multicast.html#nw-using-an-sriov-interface-for-multicast_using-sriov-multicast[Configuring an SR-IOV interface for multicast]
* If your application works as a multicast source and you want to utilize the additional interfaces to carry the multicast traffic, then you don’t need the `NET_ADMIN` capability. Follow the instructions in link:https://docs.openshift.com/container-platform/latest/networking/hardware_networks/using-sriov-multicast.html[Using high performance multicast] to set the correct multicast route in the pod’s routing table.



NOTE

OpenShift SDN CNI is deprecated as of OpenShift Container Platform 4.14. As of OpenShift Container Platform 4.15, the network plugin is not an option for new installations. In a subsequent future release, the OpenShift SDN network plugin is planned to be removed and no longer supported. Red Hat will provide bug fixes and support for this feature until it is removed, but this feature will no longer receive enhancements. As an alternative to OpenShift SDN CNI, you can use OVN Kubernetes CNI instead. For more information, see link:https://access.redhat.com/articles/7065170?extIdCarryOver=true&sc_cid=701f2000001Css5AAC[OpenShift SDN CNI removal in OCP 4.17].
